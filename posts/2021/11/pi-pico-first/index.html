<!doctype html><html lang=en>
<head>
<title>
Raspberry Pi Pico Temperature Sensor ::
Organized Chaos
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="For only $4 I couldn&amp;rsquo;t pass up the opportunity to tinker with the new(ish) Raspberry Pi Pico!
">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=https://blog.organizedchaos.tech/posts/2021/11/pi-pico-first/>
<link rel=stylesheet href=https://blog.organizedchaos.tech/assets/style.css>
<link rel=stylesheet href=https://blog.organizedchaos.tech/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=https://blog.organizedchaos.tech/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=https://blog.organizedchaos.tech/img/favicon.png>
<link href=https://blog.organizedchaos.tech/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://blog.organizedchaos.tech/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://blog.organizedchaos.tech/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://blog.organizedchaos.tech/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://blog.organizedchaos.tech/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://blog.organizedchaos.tech/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Raspberry Pi Pico Temperature Sensor">
<meta name=twitter:description content="For only $4 I couldn&rsquo;t pass up the opportunity to tinker with the new(ish) Raspberry Pi Pico!">
<meta property="og:title" content="Raspberry Pi Pico Temperature Sensor">
<meta property="og:description" content="For only $4 I couldn&rsquo;t pass up the opportunity to tinker with the new(ish) Raspberry Pi Pico!">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.organizedchaos.tech/posts/2021/11/pi-pico-first/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-11-21T08:26:48-05:00">
<meta property="article:modified_time" content="2021-11-21T08:26:48-05:00"><meta property="og:site_name" content="Organized Chaos">
</head>
<body class=dark-theme>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>organized_chaos</span>
<span class=logo__cursor></span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/about>About</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/about>About</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>Raspberry Pi Pico Temperature Sensor</h1>
<div class=post-meta>
<span class=post-date>
2021-11-21
</span>
<span class=post-author>— Written by jp</span>
<span class=post-read-time>— 3 min read</span>
</div>
<figure class=post-cover>
<img src=https://blog.organizedchaos.tech/covers/pi-pico-first.png alt="Raspberry Pi Pico Temperature Sensor">
</figure>
<div class=post-content>
<p>For only $4 I couldn&rsquo;t pass up the opportunity to tinker with the new(ish) Raspberry Pi Pico!</p>
<p>I had all these parts laying around already, so I decided to create a standalone temperature and humidity sensor.</p>
<h2 id=parts-list>Parts list:</h2>
<p>Here is everything that I used&mldr;</p>
<ol>
<li><a href=https://www.adafruit.com/product/4864>Raspberry Pi Pico RP2040</a></li>
<li><a href=https://www.adafruit.com/product/385>DHT-22 Temperature & Humidity Sensor</a></li>
<li><a href=https://www.adafruit.com/product/181>16x2 Character LCD</a></li>
<li><a href=https://www.adafruit.com/product/292>i2c character LCD backpack</a></li>
<li><a href=https://www.adafruit.com/product/805>SPDT Slide Switch</a></li>
<li><a href=https://www.adafruit.com/product/1609>Perma-Proto Half-Sized Breadboard</a>
<ol>
<li>This can also be done on a breadboard, but I needed some soldering practice so I opted for the Perma-Proto board.</li>
</ol>
</li>
<li>16k Resistor</li>
</ol>
<h2 id=wiring>Wiring:</h2>
<p>This is how I wired everything together on the Perma-Proto board&mldr;
<figure class=center>
<img src=/post-assets/pi-pico-first/pico-temp.PNG alt="Pi Wiring Diagram" style=border-radius:8px>
<figcaption class=center style=color:gray>My first attempt at using Fritzing to create a wiring diagram&mldr; Not the prettiest but it gets the job done</figcaption>
</figure>
</p>
<h2 id=installing-circuitpython>Installing CircuitPython:</h2>
<p>Once everything was soldered together, I flashed the Pico with CircuitPython. In order to do this I grabbed a copy of the latest <a href=https://circuitpython.org/board/raspberry_pi_pico/>CircuitPython UF2 file</a>. Then I held the BOOTSEL button on the Pico as I plugged it into my PC via USB. This made the Pico appear as a mass storage device. Then I dragged the UF2 onto the Pico and waited a couple of seconds for it to restart.</p>
<p>The Pico mounted as a mass storage device again, but now it had a few more files on it. The only one I cared about was <code>code.py</code>.</p>
<h2 id=code>Code!</h2>
<p>This is the code I ended up using, it&rsquo;s a hacked together combination of sample code for both the <a href=https://learn.adafruit.com/dht/dht-circuitpython-code#example-code-2980244-19>DHT22</a> and the <a href=https://learn.adafruit.com/i2c-spi-lcd-backpack/python-circuitpython#full-example-code-3007416-21>i2c 16x2 character LCD</a>.</p>
<div class=collapsable-code>
<input id=1 type=checkbox>
<label for=1>
<span class=collapsable-code__language>python</span>
<span class=collapsable-code__title>code.py</span>
<span class=collapsable-code__toggle data-label-expand=Show data-label-collapse=Hide></span>
</label>
<pre class=language-python><code>
import time
import board
import busio
import adafruit_character_lcd.character_lcd_i2c as character_lcd
import adafruit_dht
import digitalio
import os
import sys

lcd_columns = 16
lcd_rows = 2

# Initialize I2C bus.
i2c = busio.I2C(board.GP1, board.GP0)

# Initialize the lcd class
lcd = character_lcd.Character_LCD_I2C(i2c, lcd_columns, lcd_rows)
dht = adafruit_dht.DHT22(board.GP2)

# Setup the backlight toggle switch
button1 = digitalio.DigitalInOut(board.GP16)
button1.direction = digitalio.Direction.INPUT
button1.pull = digitalio.Pull.UP

#Turn backlight on
lcd.backlight = True
while True:      
    try:
        # Check if the backlight should be on or off
        if button1.value:
            lcd.backlight = True
        else:
            lcd.backlight = False

        # Get the temperature in C
        temperature_c = dht.temperature
        # Convert to Freedom Units
        temperature_f = temperature_c * (9 / 5) &#43; 32
        # Get the humidity
        humidity = dht.humidity

        # Write the results to the character LCD
        lcd.message = 
            &#34;Temp: {:.1f} F\nHumidity: {}% &#34;.format(temperature_f, temperature_c, humidity)
 
    except RuntimeError as error:
        # Errors happen fairly often, DHT&#39;s are hard to read, just keep going
        print(error.args[0])
        time.sleep(0.2)
        continue
    except Exception as error:
        # Catch a crazy failure
        dht.exit()
        raise error
    time.sleep(2.2)
</code></pre>
</div>
<h2 id=backlight-toggle>Backlight Toggle:</h2>
<p>I wired up the slide switch so I can easily toggle the LCD backlight on and off. Each time the loop runs, it checks for the state of the switch, and then sets the state of the backlight. This is somewhat clunky (and also causes a delay when toggling the backlight), but CircuitPython does not support user-written interrupts, so this is the best I could do.</p>
<h2 id=conclusion>Conclusion:</h2>
<p>With this project I achieved what I set out to do, create something useful and learn more about the Raspberry Pi Pico. Hopefully you learned something too!</p>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://blog.organizedchaos.tech/posts/2021/12/2-node-esxi-part-1/>
<span class=button__icon>←</span>
<span class=button__text>ESXi Cluster - Part 1</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>organized_chaos</span>
<span class=logo__cursor></span>
</a>
<div class=copyright>
<span>© 2022 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span>
</div>
</div>
</footer>
<script src=https://blog.organizedchaos.tech/assets/main.js></script>
<script src=https://blog.organizedchaos.tech/assets/prism.js></script>
</div>
</body>
</html>